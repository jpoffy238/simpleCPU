
                        ;; Test app for RTC	
      = 1966            PROCESSOR=6502
      = 1000            ORG=$1000
      = 4000            TIME=$4000
      = 0000            STL=$00
      = 1000            START=$1000
                        		
0000  A2 7F             LOOP:		LDX #$7F
0002  20 1210           		JSR STRLN+ORG
0005  A9 00             		LDA #0
0007  C5 00             		CMP STL
0009  D0 06             		BNE HLT
                        		
000B  EA                WAIT:		NOP
000C  CA                		DEX
000D  D0 FC             		BNE WAIT	;; delay for some cycles
000F  F0 EF             		BEQ LOOP        ;;  if wait is over check string length again

0011  3F                HLT: BYTE $3F

0012  EA                STRLN:		NOP  		;; don't allow interrupts got cmpute string length
0013  48                		PHA		;; Save current status of thing
0014  98                		TYA
0015  48                		PHA
0016  8A                		TXA
0017  48                		PHA
0018  A0 00             		LDY #0		;;
001A  A9 00             		LDA #0
001C  A2 14             		LDX #20         ;; max string size
001E  D9 0040           LOOP1:		CMP TIME,Y	;; is this the end of the string
0021  F0 04             		BEQ EOS
0023  C8                		INY
0024  CA                		DEX
0025  D0 F7             		BNE LOOP1	;; not at end check next char
0027  84 00             EOS:		STY STL
0029  68                		PLA
002A  AA                		TAX
002B  68                		PLA
002C  98                		TYA
002D  68                		PLA
002E  58                		CLI
002F  60                		RTS
                        		


00000 Total Error(s)

EOS                0027    HLT                0011    LOOP               0000
LOOP1              001E    ORG                1000 E  PROCESSOR          1966 E
START              1000 E  STL                0000 E  STRLN              0012
TIME               4000 E  WAIT               000B
