
                        ;; Test app for RTC	
      = 1966            PROCESSOR=6502
      = 1000            ORG=$1000
      = 4000            TIME=$4000
      = 0000            STL=$00
      = 1000            START=$1000
                        		
0000  A2 7F             LOOP:		LDX #$7F
0002  20 1210           		JSR STRLN+ORG
0005  A9 00             		LDA #0
0007  C5 00             		CMP STL
0009  D0 06             		BNE HLT
                        		
000B  EA                WAIT:		NOP
000C  CA                		DEX
000D  D0 FC             		BNE WAIT	;; delay for some cycles
000F  F0 EF             		BEQ LOOP        ;;  if wait is over check string length again

0011  3F                HLT: BYTE $3F
0012  48                STRLN:		PHA		;; Save current status of thing
0013  98                		TYA
0014  48                		PHA
0015  8A                		TXA
0016  48                		PHA
0017  A0 00             		LDY #0		;;
0019  A9 00             		LDA #0
001B  A2 14             		LDX #20         ;; max string size
001D  D9 0040           LOOP1:		CMP TIME,Y	;; is this the end of the string
0020  F0 04             		BEQ EOS
0022  C8                		INY
0023  CA                		DEX
0024  D0 F7             		BNE LOOP1	;; not at end check next char
0026  84 00             EOS:		STY STL
0028  68                		PLA
0029  AA                		TAX
002A  68                		PLA
002B  98                		TYA
002C  68                		PLA
002D  60                		RTS
                        		


00000 Total Error(s)

EOS                0026    HLT                0011    LOOP               0000
LOOP1              001D    ORG                1000 E  PROCESSOR          1966 E
START              1000 E  STL                0000 E  STRLN              0012
TIME               4000 E  WAIT               000B
